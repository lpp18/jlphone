<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>购物流程</title>
	<link rel="stylesheet" href="../css/base.css" type="text/css">
	<link rel="stylesheet" href="../css/main.css" type="text/css"> 
	<link rel="stylesheet" href="../css/cart.css" type="text/css"> 
	 <link href="../css/detail.css" type="text/css" rel="stylesheet">
	<script src="../js/jquery_1.11.3.min.js"></script>
	<script src="../js/main.js "></script>
	<script src="../js/jquery.cookie.js"></script>
   <style>

   </style>
</head>
<body>
	<div class="wraps2">
		<div class="top">
		    <div  class="ask">
		    	<div class="online">
		    		<a href="#"></a>
		    		<span><a href="#">在线服务</a></span>
		    	</div>
		    	<div class="help">
		    		<a href="#"></a>
		    		<span><a href="#">帮助中心</a></span>
		    	</div>
		    	<div class="backtop">
		    		<a href="#"></a>
		    		<span><a href="#">返回顶部</a></span>
		    	</div>
		    </div>
			<a class="logo lf" href="#"></a>
			<div class="login"><a class="hello" href="html/login.html">你好，请登录</a><span>|</span><a class="resg" href="html/register.html">注册</a><a class="cart_0" href="#">购物车<b id="cartnum">(0)</b></a></div>
			<div class="top_nav rf">
				<ul>
					<li><a href="../index.html">首页</a></li>
					<li class="phone"><a href="../html/phone.html">手机</a>
					</li>
					<li><a href="#">配件</a></li>
					<li><a href="#">服务</a></li>
					<li><a href="#">下载</a></li>
					<li><a href="#">社区</a></li>
					<li><a href="#">amigoOS</a></li>
					<form class="rf" action=""><input class="txt" type="text" placeholder="输入搜索内容"/><input type="button" id="btn"/></form>
				</ul>
			</div>
		</div>
  </div>
		

	    		
	<div class="wrap_carts">
    <div class="cart_title">
      <h2>
         <span class="lf"></span>
         购物车
      </h2>
      <div>
        <p class="img"></p>
        <p><span class="fir">查看购物车</span><span class="sec">确认订单信息</span><span>确认/支付订单</span></p>
      </div>
    </div> 
    <table cellspacing="0">
      <thead>
        <tr class="title">
          <th class="goods">商品</th>
          <th>单价</th>
          <th>购买数量</th>
          <th>小计</th>
          <th>操作</th>

        </tr>
      </thead>
      <tbody>
       
      </tbody>

    </table>
    <div class=total_calc><span>总价</span><i class='go_calc'>去结算</i></div>
  </div>    		
	  
	<div class="footer clear">
	  <div class="wrap">
		<a href="#">
			<i class="i_guarantee"></i>
			<span>7天<br/>退货保障</span>
		</a>
		<a href="#">
			<i class="i_promise"></i>
			<span>30天<br/>退货承诺</span>
		</a>
		<a href="#">
			<i class="i_free"></i>
			<span>99元起<br/>全场免运费</span>
		</a>
		<a href="#">
			<i class="i_after"></i>
			<span>579家<br/>售后服务点</span>
		</a>
	 </div>
		<div class=line2></div>
      <div class="wrap after">
      	<ul>
      		<li><p>关于金立</p></li>
      		<li><a href="">企业荣誉</a></li>
      		<li><a href="">金立体验店</a></li>
      		<li><a href="">代理商专区</a></li>
      		<li><a href="">加入金立</a></li>
      		<li><a href="">联系我们</a></li>
      	</ul>
      	<ul>
      		<li><p>新闻资讯</p></li>
      		<li><a href="">公司新闻</a></li>
      		<li><a href="">媒体报道</a></li>
      		<li><a href="">金立月刊</a></li>
      	</ul>
      	<ul>
      		<li><p>购物指南</p></li>
      		<li><a href="">购物流程</a></li>
      		<li><a href="">支付方式</a></li>
      		<li><a href="">配送说明及费用</a></li>
      		<li><a href="">订单管理</a></li>
      		<li><a href="">购买常见问题</a></li>
      	</ul>
      	<ul>
      		<li><p>售后服务</p></li>
      		<li><a href="">售后政策</a></li>
      		<li><a href="">售后服务网点</a></li>
      		<li><a href="">签收须知</a></li>
      		<li><a href="">物流查询</a></li>
      		<li><a href="">建议留言</a></li>
      	</ul>
      	<ul>
      	    <li><p>关于我们</p></li>
      		<li><a href=""><i class="i_sina"></i>新浪微博</a></li>
      		<li><a href=""><i class="i_tencent"></i>腾讯微博</a></li>
      		<li><a href=""><i class="i_QQ"></i>QQ空间</a></li>
      	</ul>
      	<div class="scan">
      		<i></i>
      		<p>扫一扫关注微信</p>
      	</div>
      </div>
	  <div class="wraps">
	   <div class="wrap bottom">
	  	<p><a href="">网站地图</a><span class="v_line">|</span><span class="b_under">集团下属公司<i class="tri"></i><em>欧信通讯<br>奥软网络</em></span></p>
	  	<div class="licence"><p><span class="lf">增值电信业务经营许可证：</span><a href="">粤B2-20120350</a><a href="">粤ICP备05087105号  </a><a href="">粤网文[2013]029-029号</a><a href="">粤文市审[2012]196号</a></p><a class="lit" href=""><img src="../images/base/a.png"></a><a class="lit" href=""><img src="../images/base/b.png"></a><span class="rf lan"><em>中国/简体中文</em><em class="en">Global/English</em><i class="plus"></i></span></div>
	  	<p>Copyright © 2016 深圳市金立通信设备有限公司 版权所有 .</p>
	  </div>
	  </div>
	</div>
	<script> 
     


                 var cookieobj=JSON.parse(localStorage.getItem("cart"))
              
              //cookieobj=JSON.parse(cookieobj)
              console.log(cookieobj)
          $.get('../js/detail.json', function(data) {
         var str="";
            for(var key in cookieobj){
             //console.log(key)
                var c=cookieobj[key].color;
               // console.log(cookieobj[key])
             var v=cookieobj[key].vision;
         // console.log(cookieobj[key].vision)
           
          var obj1=data[key].vision[v];
             console.log(obj1,v)
         // console.log(obj1)
         //   var obj2={};
         //  for(var key1 in obj1){
         //  obj2[key]=obj1[key1]
         // }
          //console.log(obj2.price)
          
             str+="<tr><td class='fir'><img src='../images/detail/"+data[key].color[c-1]+"'><span>"+data[key].phone_name[0]+" 颜色："+data[key].phone_name[c]+obj1.cap+"</span> </td><td class='d_price'>"+obj1.price+"</td> <td class='calc'><span class='sub lf'>-</span><input type='text' class='nums lf' value='"+cookieobj[key].num+"'><span class='plus lf'>+</span></td><td class='t_price'><span>"+cookieobj[key].total+"</span></td><td class='del'>删除</td></tr>"
                        $('tbody').html(str);
                       
                     
 }
   var tprice=0;
  $("tr .t_price span").each(function(index, el) {
      //console.log(this)
      var total=Number($(this).html().replace("￥",""))
      
      tprice+=total;
      console.log(tprice)
      $(".total_calc span").html("￥"+tprice)
  });
  $(".total_calc span").html()
 var n=cookieobj[key].num;
var m=0;
    $(".calc .sub").click(function(){ 
     
      $(".calc .limit").remove()
     m=$(this).parent().prev().html().replace("￥","")
     console.log(m)
     // tprice-=m;
       $(".total_calc span").html("￥"+tprice)

   // $(".c_num .limit").remove()
        if(n==0){n=1}
        n--; 
      console.log($(".total_calc span").html())
      //tprice=Number($(".total_calc span").html().replace("￥",""))
      //tprice+=m;
      //console.log(tprice)
       // tprice+=m;
         //$(".total_calc span").html("￥"+tprice)
      $(this).parent().find("input").val(n);

      $(this).parent().next().find("span").html("￥"+m*n);
   
      })
    
      $(".calc .plus").click(function(){
       m=$(this).parent().prev().html().replace("￥","")
   
        $(".calc .limit").remove()
        if(n==5){n=4;$(this).parent().append("<em class='limit'>限购5件!</em>")}
          n++;
        $(this).parent().find("input").val(n);
        
        $(this).parent().find("input").val(n);
        $(this).parent().next().find("span").html("￥"+m*n);
      })
      $(".del").click(function(event) {
        $(this).parent().remove();
      
        delete cookieobj[key]
       
        //delete ;
         cookieobj=JSON.stringify(cookieobj)
       localStorage.setItem("cart",cookieobj)
       console.log(localStorage.getItem("cart"))
        /// console.log(cookieobj);
         // $.cookie("cart",cookieobj)
       // console.log($.cookie("cart"))


      });
            
         });
             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
	</script>
</body>
</html>